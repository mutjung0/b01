# 8.3 ì†Œì…œ ë¡œê·¸ì¸ 739
## í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì„¤ì •
### ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„¤ì •
https://developers.kakao.com/

#### ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€í•˜ê¸°
- ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜
![8.3.11.PNG](img/8.3.11.PNG)

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€í•˜ê¸°
- ì•± í‚¤
ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜>ì•± ì„¤ì •>ì•± í‚¤
![8.3.13.PNG](img/8.3.13.PNG)

11. í™œì„±í™” ì„¤ì • ON
12. Redirect URI ì§€ì •
    - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ - Redirect URI: http://localhost:8080/login/oauth2/code/kakao


ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜>ì•± ì„¤ì •>í”Œëž«í¼
![8.3.2.PNG](img/8.3.2.PNG)
ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜>ì œí’ˆ ì„¤ì •>ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸>ë™ì˜í•­ëª©
![8.3.3.PNG](img/8.3.3.PNG)
![8.3.4.PNG](img/8.3.4.PNG)
ê°œì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì „í™˜í›„
- ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜>ì œí’ˆ ì„¤ì •>ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸:Redirect URI
![8.3.6.PNG](img/8.3.6.PNG)
- ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜>ì œí’ˆ ì„¤ì •>ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸>ë³´ì•ˆ
![8.3.5.PNG](img/8.3.5.PNG)

### í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì„¤ì • 742
```groovy
implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'
```

### ì†Œì…œ ë¡œê·¸ì¸ì´ ì²˜ë¦¬ë˜ëŠ” ê³¼ì • OAuth2 743
OAuth2(https://oauth.net/2/)
í† í°ì„ ì£¼ê³ ë°›ëŠ” ë°©ì‹ìœ¼ë¡œ í† í°ì„ ë°œí–‰í•˜ê±°ë‚˜ ê²€ì‚¬í•˜ëŠ” ë°©ì‹ì„ í†µí•´ì„œ ì„œë¹„ìŠ¤ ê°„ ë°ì´í„°ë¥¼ êµí™˜

Rest API https://developers.kakao.com/docs/latest/ko/rest-api/getting-started
ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ https://developers.kakao.com/docs/latest/ko/kakaologin/common

### ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ë¡œê·¸ì¸ ì—°ë™ ì„¤ì • 745
`spring.security.oauth2.client.registration.kakao.client-id=`ì•±í‚¤:RestAPIí‚¤

`spring.security.oauth2.client.registration.kakao.client-secret=`ë³´ì•ˆ:Client Secret ì½”ë“œ

`spring.security.oauth2.client.registration.kakao.scope=profile_nickname`
ë™ì˜í•­ëª© ID
ë‹‰ë„¤ìž„ profile_nickname í•„ìˆ˜ë™ì˜
ì¹´ì¹´ì˜¤ê³„ì •(ì´ë©”ì¼) account_email ê¶Œí•œì—†ìŒ

#### CustomSecurityConfig ì„¤ì • ë³€ê²½ 746
[CustomSecurityConfig.java](../../src/main/java/org/zerock/b01/config/CustomSecurityConfig.java)


### ë¡œê·¸ì¸ ì—°ë™ í›„ ì´ë©”ì¼ êµ¬í•˜ê¸° 748
[CustomOAuth2UserService.java](../../src/main/java/org/zerock/b01/security/CustomOAuth2UserService.java)
```shell
2024-11-22 12:10:58.031  INFO 1160 --- [nio-8080-exec-1] o.z.b.security.CustomOAuth2UserService   : userRequest...
2024-11-22 12:10:58.031  INFO 1160 --- [nio-8080-exec-1] o.z.b.security.CustomOAuth2UserService   : org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest@4c398a06
```

```shell
2024-11-22 12:14:14.335  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : kakao
2024-11-22 12:14:14.392  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : ---------------------
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : id:1234567890
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : ---------------------
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : connected_at:2024-11-22T03:06:23Z
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : ---------------------
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : properties:{nickname=ðŸ’œ}
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : ---------------------
2024-11-22 12:14:14.395  INFO 15088 --- [nio-8080-exec-9] o.z.b.security.CustomOAuth2UserService   : 
kakao_account:{profile_nickname_needs_agreement=false, profile={nickname=ðŸ’œ, is_default_nickname=false}}
```

- clientName: kakao

ë¹„ì¦ˆë‹ˆìŠ¤
ê°œì¸ ê°œë°œìž ë¹„ì¦ˆ ì•± ì‹ ì²­>2ë‹¨ê³„ì¸ì¦ì„¤ì •>
![8.3.8.PNG](img/8.3.8.PNG)


Map<String, Object> OAuth2User.getAttributes();
```
{
    id=3802749498, 
    connected_at=2024-11-22T03:06:23Z, 
    properties={nickname=ðŸ’œ}, 
    kakao_account={
        profile_nickname_needs_agreement=false, 
        profile={nickname=ðŸ’œ, is_default_nickname=false}, 
        has_email=true, 
        email_needs_agreement=true
    }
}
```
id=380302765
```
{
    profile_nickname_needs_agreement=false, 
    profile={nickname=ðŸ’œ, is_default_nickname=false}, 
    has_email=true, 
    email_needs_agreement=false, 
    is_email_valid=true, 
    is_email_verified=true, 
    email=purplike@kakao.com
}
```